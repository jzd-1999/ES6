<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
</head>
<body>
<ul>
    <li>this is number 1</li>
    <li>this is number 2</li>
    <li>this is number 3</li>
    <li>this is number 4</li>
    <li>this is number 5</li>
</ul>
</body>
<script>
    var lis = document.querySelector('ul').querySelectorAll('li');
    for (var i = 0; i < lis.length; i++) {
        lis[i].index = i;
        lis[i].addEventListener("click", function () {
            console.log(this.index)
        })
    }
    for (var j = 0; j < lis.length; j++) {
        //立即执行函数也成为小闭包因为立即执行函数里面的任何一个函数都可以使用它的 j 这个变量
        (function (j) {
            //不点击 j 就不会销毁 造成了内存泄漏
            lis[j].addEventListener("click", function () {
                console.log("j: " + j);
            })
        })(j);
    }
    //闭包应用 -3秒后打印li元素的内容
    for (var k = 0; k < lis.length; k++) {
        (function (k) {
            setTimeout(function () {
                console.log(lis[k].textContent)
            }, 3000)
        })(k)

    }
</script>
</html>